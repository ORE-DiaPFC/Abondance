##-----------------------------DATA ----------------------------------##
# year <- 2015
# site <- "Scorff"
# stade <- "smolt"

load(paste('data/data_',stade,"_",year,'.Rdata',sep=""))

#------------------------INITS----------------------------------##


###################################################
# NO UPDATE
###################################################
inits_fix <- list(
  ## NO UPDATE
  log_cess_MC = -0.2224,
  rate_lambda = 0.00248,
  shape_lambda = 2.893,
  logit_flow_MC = -0.55,
  logit_int_MC = 0.7
)



###################################################
# TO UPDATE
###################################################
#inits_updated <- list(

## METTRE A JOUR
# p_MC = c(
#   0.6704,0.8023,0.6877,0.6906,0.8445,
#   0.6361,0.8376,0.8768,0.6882,0.818,
#   0.6731,0.4599,0.4611,0.7612,0.8879,
#   0.4909,0.8072,0.6636,0.7157,0.816,
#   0.6614,0.7451,0.5876,0.5282,0.4533,
#   0.4882,0.7201,0.4379,0.4570,0.45,
#   0.25)
# )
p_MC = (data$Cm_R / data$Cm_MC)

  ## METTRE A JOUR
  # Ntot = c(
  #   792.0,365.0,433.0,780.0,886.0,
  #   237.0,698.0,237.0,468.0,770.0,
  #   1133.0,482.0,1111.0,255.0,2059.0,
  #   1413.0,2350.0,1242.0,1159.0,809.0,
  #   1321.0,962.0,2228.0,3502.0,1544.0,
  #   1952.0,1358.0,1358.0,1647.0,2500,
  #   2000),
  
  Ntot = as.integer(data$C_MC * p_MC)
  
  ## METTRE A JOUR
  # lambda = c(
  #   762.7,361.5,488.6,749.6,885.7,
  #   231.4,723.4,225.5,440.7,761.1,
  #   1089.0,489.0,1092.0,277.8,2064.0,
  #   1448.0,2313.0,1284.0,1145.0,820.3,
  #   1371.0,962.5,2208.0,3465.0,1588.0,
  #   1955.0,1409.0,1369.0,1650.0,2500,
  #   2000),
  lambda = Ntot


inits_updated <- list(
  Ntot = Ntot
  , lambda = lambda
  , p_MC = p_MC
)

inits <- list(c( inits_fix,inits_updated))

#save(inits,file=paste('inits/inits_',stade,year,'.Rdata',sep=""))
bugs.inits(inits, n.chains=1,digits=3, inits.files = paste('inits/init-',site,'-',stade,year,'.txt',sep=""))

